@page
@model WoodgroveDemo.Pages.Multiple.IssueModel
@{
    ViewData["Title"] = "Issue a gift card";
    ViewData["SubTitle"] = "Multiple attestations";
}


@section Background {
    <div style="background-image: url(/images/scenarios/giftcard1.png), url(/images/scenarios/giftcard2.png);
    background-repeat: no-repeat;
    background-size: 167px, 65%;
    background-position: left bottom, right top;
    height: 100vh;
    width: 100%;
    z-index: -250;
    position: absolute;">

    </div>

    <div id="layover" class="wgu-layover">
        <div class="position-absolute top-0 end-0">
            <button class="btn btn-warning" onclick="endDemo()" style="margin-left: -100px; margin-top: 25px;">X</button>
        </div>

        <div class="jumbotron wgu_jumbotron_demo_center" style="top: 50%; left: 50%;">
            <div class="bs-stepper vertical">
                <div class="bs-stepper-header" role="tablist">
                    <!-- your steps here -->
                    <div class="step" data-target="#intro-part">
                        <button type="button" class="step-trigger" role="tab" aria-controls="intro-part"
                            id="intro-part-trigger">
                            <span class="bs-stepper-circle" style="visibility: hidden;"><i class="bi bi-info-lg"></i></span>
                            <span class="bs-stepper-label">Welcome</span>
                        </button>
                    </div>
                    <div class="step" data-target="#qrcode-part">
                        <button type="button" class="step-trigger" role="tab" aria-controls="qrcode-part"
                            id="qrcode-part-trigger">
                            <span class="bs-stepper-circle"><i class="bi bi-qr-code"></i></span>
                            <span class="bs-stepper-label">Scan the QR code</span>
                        </button>
                    </div>
                    <div class="line"></div>
                    <div class="step" data-target="#userAction-part">
                        <button type="button" class="step-trigger" role="tab" aria-controls="userAction-part"
                            id="userAction-part-trigger">
                            <span class="bs-stepper-circle"><i class="bi bi-person-lock"></i></span>
                            <span class="bs-stepper-label">Enter PIN code <br> and name</span>
                        </button>
                    </div>
                    <div class="line"></div>
                    <div class="step" data-target="#completed-part">
                        <button type="button" class="step-trigger" role="tab" aria-controls="completed-part"
                            id="completed-part-trigger">
                            <span class="bs-stepper-circle"><i class="bi bi-check2-all"></i></span>
                            <span class="bs-stepper-label">Completed</span>
                        </button>
                    </div>
                </div>
                <div class="bs-stepper-content position-relative" style="width: 100%;">
                    <!-- Introdction step -->
                    <div id="intro-part" class="content fs-5" role="tabpanel" aria-labelledby="intro-part-trigger">

                        This online demo will help you get Woodgrove gift card. The total value of the gift card is 150$.
                        @Model._settings.CardDetails.Card.Description


                        <p style="padding-top: 15px;">
                            If you already have this
                            credential, first delete it from the Authenticator app, or
                            <a asp-page="Present" class="link-warning">start the presentation demo</a>.
                        </p>

                        <p style="padding-top: 15px;">
                            To start, click the
                            start
                            button.
                        </p>

                        <div class="position-absolute bottom-0 end-0">
                            <button type="button" id="startDemoBtn" class="btn btn-warning" onclick="startIssuance('Multiple' , null);">
                                <span id="startDemoSpinner" style="display: none;" class="spinner-border spinner-border-sm"
                                    role="status" aria-hidden="true"></span> Next</button>
                        </div>
                    </div>

                    <div id="qrcode-part" class="content fs-5" role="tabpanel" aria-labelledby="qrcode-part-trigger">
                        <partial name="QrCodePartial" />
                    </div>

                    <div id="userAction-part" class="content fs-5" role="tabpanel"
                        aria-labelledby="userAction-part-trigger">
                        <p>
                            In the Microsoft Authenticator do the following:
                        </p>

                        <ol>
                            <li>Enter the following PIN code <span id="pinCode" class="fs-3" style="color: orange;"></span> and select <b>Next</b>.</li>
                            <li>Select the <span style="color: orange;">displayName</span> filed and enter your name, then
                                select <b>Add</b>.</li>
                            <li>To add the gift card to your wallet, select <b>Add</b>.</li>
                        </ol>
                    </div>


                    <div id="completed-part" class="content fs-3" style="margin-top: 50px;" role="tabpanel"
                        aria-labelledby="completed-part-trigger">
                        Congratulations, your gift card was issued and is stored in Microsoft authenticator on your
                        mobile
                        phone and ready to use.

                        <div class="text-center fs-1" style="margin-top: 20px;">
                            <i class="bi bi-emoji-smile"></i>
                        </div>

                        <p class="fs-6" style="margin-top: 20px;">
                            Next, start the <a id="linkToPresent" class="link-warning" asp-page="Present">presentation of
                                the
                                student card</a> demo
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@section Demo {

    <div class="row">
        <div class="col fs-4">
            <p style="margin-top: 100px;">
                Woodgrove gift card is a prepaid stored-value money card, issued by Woodgrove, to be used as an
                alternative to cash
                for purchases within Woodgrove store and related businesses.
            <h4>How can you use gift cards?</h4>
            <ul class="col fs-6">
                <li>The gift card can be spent on anything in Woodgrove online store</li>
                <li>Order coffee and donuts at Woodgrove campus cafeteria</li>
                <li>Cannot be combined with other promotions</li>
                <li>The gift card expires in six months</li>
            </ul>

            <button type="button" style="margin-top: 50px;" class="btn btn-secondary btn-lg" onclick="startDemo();"><i
                    class="bi bi-gift"></i>
                Get Woodgrove gift card now</button>
            </p>
        </div>
        <div class="col" style="padding-left: 100px;">
            <p class="text-center">
                <i class="bi bi-gift" style="font-size: 150pt; color: white;"></i>
            </p>

        </div>
    </div>


}

@section Scripts {


}

@section VerifiableCredentialDescription {
    <p style="margin-top: 10px;">
        This example shows how to issue a verifiable credential with <a
            href="https://learn.microsoft.com/entra/verified-id/how-to-use-quickstart-multiple">multiple attestations</a>.

        Woodgrove University provides the <b>sum</b> claim specifying the amount of money in the card (<a
            href="https://learn.microsoft.com/en-us/entra/verified-id/how-to-use-quickstart">ID token hint attestation</a>).
        The user enters their display name (<a
            href="https://learn.microsoft.com/entra/verified-id/how-to-use-quickstart-selfissued">self-issue
            attestation</a>).
        For
        details check the <a
            href="https://learn.microsoft.com/en-us/entra/verified-id/rules-and-display-definitions-model#idtokenhintattestation-type">idTokenHint
            attestation</a> and the <a
            href="https://learn.microsoft.com/en-us/entra/verified-id/rules-and-display-definitions-model#selfissuedattestation-type">selfIssued</a>
        attestation</a> in the credential definition tab.
    </p>
}
